syntax = "proto3";
package channel;
option go_package = "github.com/kagari-org/cryonet/gen/channel";

// only needed by ws connections
message Init {
  string id = 1;
  string token = 2;
}

message Packet {
  string from      = 2;
  string to        = 3;
  oneof  payload {
    Alive       alive       = 4;
    Offer       offer       = 5;
    Answer      answer      = 6;
    Candidate   candidate   = 7;
  }
}

message Alive {
  repeated string peers = 1;
}

message Offer {
  string ufrag   = 2;
  string pwd     = 3;
  bytes  pubkey  = 4;
}

message Answer {
  bool   success = 1;
  string ufrag   = 2;
  string pwd     = 3;
  bytes  pubkey  = 4;
}

message Candidate {
  string candidate = 1;
}
